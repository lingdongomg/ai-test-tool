# Change: 添加本地知识库系统

## Why

当前AI生成单测时缺乏项目特定的上下文知识，导致生成的测试用例不够准确：
- 不知道需要在header中传入认证TOKEN
- 不了解直播电商模块需要传入game-id
- 不清楚测试环境的具体配置（如demo游戏ID）
- 无法从历史测试和日志中学习积累经验

需要构建一个本地知识库系统，让AI能够：
1. 存储和检索项目特定知识
2. 从日志解析中自动学习新知识
3. 在生成单测时智能应用相关知识

## What Changes

### 核心组件
- **知识存储层**: 新增数据库表存储知识条目，支持分类、标签、元数据
- **向量索引**: 集成轻量级向量存储（ChromaDB），支持语义检索
- **知识类型体系**: 定义知识分类（项目配置、业务规则、模块知识、测试经验）
- **知识学习引擎**: 从日志解析和测试执行中提取知识的LLM链
- **知识检索器**: 基于关键词+语义的混合检索
- **RAG增强**: 在测试生成时自动检索并注入相关知识

### 功能特性
1. 知识CRUD管理（手动添加/编辑/删除）
2. 日志解析时自动提取知识建议
3. 测试失败时学习经验教训
4. 知识版本控制和审核机制
5. 前端知识库管理界面

## Impact

### Affected Code
- `ai_test_tool/database/`: 新增knowledge表和模型
- `ai_test_tool/llm/`: 新增知识提取链和检索增强
- `ai_test_tool/knowledge/`: **新模块** - 知识库核心实现
- `ai_test_tool/services/`: 集成知识库到测试生成流程
- `ai_test_tool/api/routes/`: 新增知识库管理API
- `web/src/views/`: 新增知识库管理页面

### Affected Specs
- knowledge-base (新增)

### 依赖变更
- 新增 `chromadb` - 轻量级向量数据库
- 新增 `sentence-transformers` - 文本向量化（可选，支持离线模型）
